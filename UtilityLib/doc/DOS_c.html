<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<title>./DOS.c</title>
<!-- Source: ./DOS.c -->
<!-- Generated with ROBODoc Version 4.99.34 (Jan  4 2008) -->
</head>
<body>
<div id="logo">
<a name="robo_top_of_doc">Utility Library</a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./masterindex.html#top">Index</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_types.html#top">Types</a>
<a class="menuitem" href="./robo_variables.html#top">Variables</a>
</div> <!-- navigation -->
<div id="content">
<hr />
<a name="SWL2fDOS">
</a><a name="robo3"></a><h2>SWL/DOS [ Modules ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_modules.html#robo_top_of_doc">Modules</a> ]</p>
<p class="item_name">INTRODUCTION</p>
<pre>      This module completes some lack of the libc concerning path
      management and especially directory scanning, which is available through
      Win32 or POSIX calls.

      Examining, reading, writing, deleting or renaming files/directories can
      be accomplished using standard C library functions (usually located in
      stdio), check manual page for complete documentation of :

      - int stat(const char * path, struct stat * stbuf);
        This is a POSIX function available in stdlib.h, though most systems
        usually provide an implementation. All field may not be relevant, but
        it is worth to get detailed information on a file/directory.

      - int rename(char * from, char * to);
        Use it to rename/move a file/directory.

      - int remove(char * path);
        Can be use to delete a file or an empty directory.

      - stdio fopen(), fread(), fwrite(), fprintf(), fscanf(), ....
        These functions are quite handy to process content of a file and would
        be overkill to provide replacement for them.

      Note that Windows accepts both forward and backward slash as filename
      separator. This modules will use backward slash whenever possible,
      unless forward is already present in filename (or forced using dedicated
      global variable).
</pre>

<hr />
<a name="DOS2fAddExt">
</a><a name="robo23"></a><h2>DOS/AddExt, DOS/StripExtension [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>AddExt</strong> - replace or add a file extension to given path.
      <strong>StripExtension</strong> - remove extension of path, if any.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      void <strong>AddExt</strong>(STRPTR path, STRPTR ext, int max, Bool replace);
      void <strong>StripExtension</strong>(STRPTR path);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      <strong>AddExt</strong> can be used to add, replace or remove an extension from the last
      component of a path.

      <strong>StripExtension</strong> is a simple macro that expends to : <strong>AddExt</strong>(path, "", 0, True).
</pre>
<p class="item_name">INPUT</p>
<pre>      - path    : buffer to modify.
      - ext     : extension to add or replace. Initial dot will be ignored.
      - max     : size of buffer in bytes.
      - replace : replace extension if any, otherwise append it.
</pre>
<p class="item_name">EXAMPLES</p>
<pre>      <strong>AddExt</strong>("C:/Myfile.txt", ".tif", 100, True);   =&gt; "C:/MyFile.tif"
      <strong>AddExt</strong>("C:/Myfile", "tif", 100, True);        =&gt; "C:/MyFile.tif"
      <strong>AddExt</strong>("C:/Myfile", "tif", 12, True);         =&gt; "C:/MyFile.t"
      <strong>AddExt</strong>("C:/Myfile.tif", "txt", 4, True);      =&gt; "C:/MyFile.tif"
      <strong>AddExt</strong>("C:/Myfile.tif", "txt", 100, False);   =&gt; "C:/MyFile.tif.txt"
      <strong>AddExt</strong>("C:/Myfile.tif", "", 100, True);       =&gt; "C:/MyFile"
      <strong>AddExt</strong>("C:/Myfile.tif", "", 100, False);      =&gt; "C:/MyFile.tif"
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo37">GetExtension</a>
</pre>

<hr />
<a name="DOS2fAddPart">
</a><a name="robo24"></a><h2>DOS/AddPart [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>AddPart</strong> - Appends a file/dir to the end of a path
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      Bool <strong>AddPart</strong>(STRPTR path, STRPTR file, int max);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      This function adds a file, directory, or subpath name to a directory
      path name taking into account any required separator characters. If
      "file" is a fully-qualified path it will totally replace the current
      value of "path".
</pre>
<p class="item_name">INPUT</p>
<pre>      path - the path to add a file/directory name to.
      file - the filename or directory name to add. May be a relative
             pathname from the current directory (example: foo\bar).
             Can deal with '..', to get parent directory.
      max  - Size in bytes of the space allocated for dirname.
</pre>
<p class="item_name">RESULT</p>
<pre>      True if file part was added successfully or False if the buffer would
      have overflowed (path might be partialy modified). Validity of path will
      not be verified.
</pre>
<p class="item_name">EXAMPLE</p>
<pre>      <strong>AddPart</strong>("C:/Program files", "Somewhere");
              =&gt; "C:/Program files/Somewhere"
      <strong>AddPart</strong>("C:/Temp", "../Windows/System32");
              =&gt; "C:/Windows/System32"
                 More than one component can be given for 'file', '..' is processed
                 to get a somewhat canonical name).
      <strong>AddPart</strong>("C:/Temp", "/Windows/System32");
              =&gt; "C:/Windows/System32"
                 A starting / or \ in the 'file' path indicates root of disk.
      <strong>AddPart</strong>("C:/Temp", "D:/My documents");
              =&gt; "D:/My documents"
                 Fully qualified path completly overrides source path.
      <strong>AddPart</strong>("Folder", "Sub folder");
              =&gt; "Folder\\Sub folder"
                 If kind of slash cannot be determined, backward will be used as
                 default...
      <strong>AddPart</strong>("Folder", "Sub folder/Even deeper");
              =&gt; "Folder/Sub folder/Even deeper"
                 ...unless forward slash is used in 'file'.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo42">ParentDir</a>, <a href="#robo26">CatPath</a>, <a href="#robo36">ForceForwardSlash</a>
</pre>

<hr />
<a name="DOS2fBaseName">
</a><a name="robo25"></a><h2>DOS/BaseName [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>BaseName</strong> - Retrieve file part of given path
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      STRPTR <strong>BaseName</strong>(STRPTR path);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Get last component of a path.
</pre>
<p class="item_name">RESULT</p>
<pre>      Pointer will reference memory inside path, nothing will be allocated.
</pre>
<p class="item_name">EXAMPLES</p>
<pre>      <strong>BaseName</strong>("C:\\Program files\\XYZ corp")
              =&gt; Pointer to "XYZ corp"
      <strong>BaseName</strong>("Test file.txt")
              =&gt; Pointer to "Test file.txt"
      <strong>BaseName</strong>("C:\\Temp\\")
              =&gt; Pointer to end of string
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo26">CatPath</a>, <a href="#robo24">AddPart</a>
</pre>

<hr />
<a name="DOS2fCatPath">
</a><a name="robo26"></a><h2>DOS/CatPath [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>CatPath</strong> - Catenate directory components into a single path
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      STRPTR <strong>CatPath</strong>(STRPTR path, ...);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Catenate each path passed as arguments list (which MUST be NULL
      terminated). Path can be relative or absolute. Validity of the path
      will NOT be checked. This function is based on <a href="#robo24">AddPart</a>, same rules
      apply to this function.
</pre>
<p class="item_name">INPUT</p>
<pre>      path  - first component of path to catenate.
      ...   - list of other components that must be NULL-terminated.
</pre>
<p class="item_name">RESULT</p>
<pre>      Catenated path in a malloc()'ed buffer, that you must free() yourself.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo24">AddPart</a>
</pre>

<hr />
<a name="DOS2fCreatePath">
</a><a name="robo27"></a><h2>DOS/CreatePath [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>CreatePath</strong> - Create missing directories from specified path
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      STRPTR <strong>CreatePath</strong>(STRPTR path, Bool not_last);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Creates each missing part of the specified path. Stop at the first
      component that cannot be created and returns its reference.
</pre>
<p class="item_name">INPUT</p>
<pre>      path     - path where directory will be created
      not_last - avoid creating a directory for last component of path. If
                 path is supposed to point to a file, you can call this
                 function with 'not_last' set to True, to create possibly
                 missing directory, without modifying the string. Thus can
                 use it just afterward to create your file.
</pre>
<p class="item_name">RESULT</p>
<pre>      NULL if everything was fine or pointer to part that causes the function
      to fail.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo26">CatPath</a>, <a href="#robo24">AddPart</a>
</pre>

<hr />
<a name="DOS2fDeleteDOS">
</a><a name="robo28"></a><h2>DOS/DeleteDOS, DOS/DeletePath [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>DeleteDOS</strong>  - Delete one <a href="#robo3">DOS</a> object from disk.
      <strong>DeletePath</strong> - Delete recursively directory.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      Bool <strong>DeleteDOS</strong>(STRPTR path);
      Bool <strong>DeletePath</strong>(STRPTR path);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Attempt to delete specified file/dir from disk. Must have acess right and in
      case of a directory, it must be empty.

      If you want to delete whatever object, including non-empty directory use
      <strong>DeletePath</strong>.
</pre>

<hr />
<a name="DOS2fExecute">
</a><a name="robo29"></a><h2>DOS/Execute [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>Execute</strong> - <strong>Execute</strong> a <a href="#robo3">DOS</a> command and wait until it completes.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      int <strong>Execute</strong>(STRPTR cmd);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      command to execute followed by its possible arguments. Input and output
      will be shutdown and possible window (including <a href="#robo3">DOS</a>) will be minimized at
      startup.
</pre>
<p class="item_name">RESULT</p>
<pre>      Return value of process or -1 if it has not been started.
</pre>

<hr />
<a name="DOS2fFileCopy">
</a><a name="robo30"></a><h2>DOS/FileCopy [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>FileCopy</strong> - make a copy as close as possible of given file.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      Bool <strong>FileCopy</strong>(STRPTR src, STRPTR dest, Bool overwrite);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      This function will make a copy as close as possible of original file, including
      timestamp and extended attributes (if any).
</pre>
<p class="item_name">INPUT</p>
<pre>      src       - Source file to copy.
      dest      - Destination file, path must exist.
      overwrite - True if overwriting existing file is allowed, False otherwise.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo33">FileRename</a>, <a href="#robo28">DeleteDOS</a>
</pre>

<hr />
<a name="DOS2fFileExists">
</a><a name="robo31"></a><h2>DOS/FileExists [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>FileExists</strong> - check if a file (or directory) exists.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      Bool <strong>FileExists</strong>(STRPTR file);
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo35">FileVisible</a>
</pre>

<hr />
<a name="DOS2fFilenameEncoding">
</a><a name="robo32"></a><h2>DOS/FilenameEncoding [ Variables ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_variables.html#robo_top_of_doc">Variables</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>FilenameEncoding</strong> - control encoding of filename.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      int <strong>FilenameEncoding</strong> = ENC_CP1252;
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Control encoding of filename given as argument or returned by all <a href="#robo3">DOS</a> related
      functions. Possible values are:
              ENC_CP1252 - Windows-1252 charset. Superset of iso-8859-1.
              ENC_UTF8   - 8bit unicode with variable-length characters.

      This is a global intended to be initialized at startup. For sanity, avoid
      using many encoding within your program, convert everything if it does not
      conforms to what expected.
</pre>

<hr />
<a name="DOS2fFileRename">
</a><a name="robo33"></a><h2>DOS/FileRename [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>FileRename</strong> - rename and/or move a file/directory
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      Bool <strong>FileRename</strong>(STRPTR from, STRPTR to, Bool overwrite);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Will rename and/or move the given file/directory to the new name/location.
      If new location is on a different partition, file will be copied instead
      (note : if it is a directory, the operation will fail). If overwrite is
      True, possible destination file will be overwritten if it exists.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo28">DeletePath</a>, <a href="#robo30">FileCopy</a>
</pre>

<hr />
<a name="DOS2fFileSize">
</a><a name="robo34"></a><h2>DOS/FileSize [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>FileSize</strong> - Get file size in bytes.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      ULONG <strong>FileSize</strong>(STRPTR path);
</pre>
<p class="item_name">RESULT</p>
<pre>      File size in bytes or 0 if it cannot be retrieved.
</pre>

<hr />
<a name="DOS2fFileVisible">
</a><a name="robo35"></a><h2>DOS/FileVisible [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>FileVisible</strong> - check if a file (or directory) is not normally hidden from OS.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      Bool <strong>FileVisible</strong>(STRPTR file);
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo31">FileExists</a>
</pre>

<hr />
<a name="DOS2fForceForwardSlash">
</a><a name="robo36"></a><h2>DOS/ForceForwardSlash [ Variables ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_variables.html#robo_top_of_doc">Variables</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>ForceForwardSlash</strong> - a variable controlling use of slash in pathname
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      Bool <strong>ForceForwardSlash</strong> = False;
</pre>
<p class="item_name">FUNCTION</p>
<pre>      This global variable controls what kind of slash should be used by default
      by all functions that manipulate path. Okay, this is a quick hack intended
      for those, like me, who hates that damn backward slash. Absolutly not thread
      safe, set it up when starting your program, or know what your are doing.
</pre>

<hr />
<a name="DOS2fGetExtension">
</a><a name="robo37"></a><h2>DOS/GetExtension [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>GetExtension</strong> - Give a pointer to last dot
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      STRPTR <strong>GetExtension</strong>(STRPTR path);
</pre>
<p class="item_name">RESULT</p>
<pre>      Pointer to character following last dot in the path.
      If no dot is found before the path separator, a pointer to the end
      of the string will be returned.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo25">BaseName</a>
</pre>

<hr />
<a name="DOS2fGetSysError">
</a><a name="robo38"></a><h2>DOS/GetSysError, DOS/GetError [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>GetSysError</strong> - Get error message of last function that indicated a failure code.
      <strong>GetError</strong>    - Get error message in a STATIC buffer.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      void <strong>GetSysError</strong>(STRPTR header, STRPTR buffer, int max);
      STRPTR <strong>GetError</strong>(void);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      <strong>GetSysError</strong> will copy into 'buffer' a message suitable to be displayed to user,
      that will describe the cause of the last error encountered. Format will be
      &lt;header: msg&gt;.

      <strong>GetError</strong> will return the error message in a static buffer and is therefore not
      thread safe.
</pre>

<hr />
<a name="DOS2fIsDir">
</a><a name="robo39"></a><h2>DOS/IsDir [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>IsDir</strong> - Check if a path points to a directory.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      Bool <strong>IsDir</strong>(STRPTR path)
</pre>

<hr />
<a name="DOS2fIsSameFile">
</a><a name="robo40"></a><h2>DOS/IsSameFile [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>IsSameFile</strong> - check if two paths point to same physical file.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      Bool <strong>IsSameFile</strong>(STRPTR file1, STRPTR file2);
</pre>

<hr />
<a name="DOS2fLockFileMode">
</a><a name="robo41"></a><h2>DOS/LockFileMode [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>LockFileMode</strong> - Prevent certain operation on a file.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      APTR <strong>LockFileMode</strong>(STRPTR path, int mode);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Prevent other process to perform some operation on a file.
</pre>
<p class="item_name">INPUT</p>
<pre>      - path : path of the file to lock.
      - mode : bitfield that indicates operations that will be allowed on file after
               it has been successfully locked:
               - LFM_READ  : read allowed
               - LFM_WRITE : modification allowed (including truncating but not delete)

               0 indicates an exclusive lock. No process (including caller) will be
               able to open the file.
</pre>
<p class="item_name">RESULT</p>
<pre>      Lock handle or NULL if there was a problem.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo47">UnlockFileMode</a>
</pre>

<hr />
<a name="DOS2fParentDir">
</a><a name="robo42"></a><h2>DOS/ParentDir [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>ParentDir</strong> - Removes the last part of a filename
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      Bool <strong>ParentDir</strong>(STRPTR dir);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      This function simply *modify* its argument to point to its parent
      directory. Note that validity of path will NOT be verified. It is
      somewhat like <a href="#robo24">AddPart</a>(dir, "..").
</pre>
<p class="item_name">RESULT</p>
<pre>      True if path contained a removable part, False is there was no more
      part to remove.
</pre>
<p class="item_name">EXAMPLE</p>
<pre>      <strong>ParentDir</strong>("C:/Program files/Common files/");   =&gt; "C:/Program files"
      <strong>ParentDir</strong>("C:\\Program files");                =&gt; "C:"
      <strong>ParentDir</strong>("C:\\");                             =&gt; returns False.
      <strong>ParentDir</strong>("Folder/Sub")                        =&gt; "Folder"
      <strong>ParentDir</strong>("Folder")                            =&gt; ""
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo24">AddPart</a>, <a href="#robo26">CatPath</a>, <a href="#robo27">CreatePath</a>
</pre>

<hr />
<a name="DOS2fSafePath">
</a><a name="robo43"></a><h2>DOS/SafePath [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>SafePath</strong> - sanitize path to avoid bad surprise.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      void <strong>SafePath</strong>(STRPTR path);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Not every characters in file name are allowed. Especially on Windows,
      where the system silently removes characters from filename, giving some
      surprise when attempting to find it by scanning directory.

      Forbidden characters includes : \ / : * \ " &lt; &gt; | ?
      Those characters will be replaced by _

      Moreover, it is not possible to have one or several dots/spaces/
      underscores at the end of filename, at least since Windows 2000. Thus
      those characters will be trimmed from string.

      The function modifies its argument (result will always contains same or
      less characters than original), do not pass constant strings.
</pre>

<hr />
<a name="DOS2fScanDir">
</a><a name="robo44"></a><h2>DOS/ScanDir [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>ScanDir</strong> - Scan a directory content
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      int <strong>ScanDir</strong>(STRPTR dir, DirScanFunc cb, APTR data);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Scan each entries of the dir (. and .. will be filtered - you can
      assume they always exists). For each entries the user callback will be
      applied on them. Expected prototype for this callback is :

              int DirScanFunc(STRPTR dir, STRPTR file, APTR data);

      Each parameters have following meaning :

      - dir : this the same value than the one passed to <strong>ScanDir</strong>().
      - file : this is a file or dir name found in the directory, which does
               not include the directory part. No particular order should be
               assumed : entries are listed as they appear in the directory.
      - data : the user data supplied to <strong>ScanDir</strong>().

      Callback should return a positive or 0 value if directory scanning must
      continue or negative if it must stop immediatly.
</pre>
<p class="item_name">RESULT</p>
<pre>      The *sum* of all return codes of your callback.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      stat(3), <a href="#robo24">AddPart</a>
</pre>

<hr />
<a name="DOS2fTimeStamp">
</a><a name="robo45"></a><h2>DOS/TimeStamp [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>TimeStamp</strong> - Get timestamp type of given file
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      ULONG <strong>TimeStamp</strong>(STRPTR path, int type);
</pre>
<p class="item_name">INPUT</p>
<pre>      - path : path of file to retrieve given timestamp type
      - type : if 0 get creation time,
               if 1 get access time (not always accurate).
               if 2 get modification time.
</pre>
<p class="item_name">RESULT</p>
<pre>      Timestamp in seconds relative to January 1st, 1970 or 0 if timestamp cannot
      be retrieved.
</pre>

<hr />
<a name="DOS2fUnix2DOS">
</a><a name="robo46"></a><h2>DOS/Unix2DOS, DOS/DOS2Unix [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>Unix2DOS</strong> - Convert a /-separated path into a \-separated
      <strong>DOS2Unix</strong> - Convert a \-separated path into a /-separated
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      STRPTR <strong>Unix2DOS</strong>(STRPTR path);
      STRPTR <strong>DOS2Unix</strong>(STRPTR path);
</pre>
<p class="item_name">INPUT</p>
<pre>      path - pointer to string where path will be modified. Do not pass
             static strings.
</pre>
<p class="item_name">RESULT</p>
<pre>      Pointer to path. Function never fails.
</pre>

<hr />
<a name="DOS2fUnlockFileMode">
</a><a name="robo47"></a><h2>DOS/UnlockFileMode [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo3">DOS</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>UnlockFileMode</strong> - release previously locked file.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      void <strong>UnlockFileMode</strong>(APTR lock);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Release lock held on file.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo41">LockFileMode</a>
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./DOS.c with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.34 on Thu Mar 06 2008 10:21:26
</p>
</div> <!-- footer -->
</body>
</html>
