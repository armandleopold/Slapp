<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<title>./HashTable.c</title>
<!-- Source: ./HashTable.c -->
<!-- Generated with ROBODoc Version 4.99.34 (Jan  4 2008) -->
</head>
<body>
<div id="logo">
<a name="robo_top_of_doc">Utility Library</a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./masterindex.html#top">Index</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_types.html#top">Types</a>
<a class="menuitem" href="./robo_variables.html#top">Variables</a>
</div> <!-- navigation -->
<div id="content">
<hr />
<a name="SWL2fHash">
</a><a name="robo5"></a><h2>SWL/Hash [ Modules ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_modules.html#robo_top_of_doc">Modules</a> ]</p>
<p class="item_name">INTRODUCTION</p>
<pre>      Basic usage is as follow:

              HashTable h;
              HashKey   k;
              HashValue v;
              HashValue found;

              static ULONG hash_from_key_fn(APTR k);
              static int   keys_equal_fn(APTR key1, APTR key2);

              h = <a href="#robo54">HashCreate</a>(16, hash_from_key_fn, keys_equal_fn);
              k = malloc(sizeof *k);
              v = malloc(sizeof *v);

              // (initialise k and v to suitable values)

              if (! <a href="#robo56">HashInsert</a>(h, k, v))
                      exit(-1);

              if (NULL == (found = <a href="#robo62">HashSearch</a>(h, k)))
                      printf("Not found !\n");

              // You'll have to manage memory of your keys and values yourself
              if (NULL == (found = <a href="#robo60">HashRemove</a>(h, k)))
                      printf("Not found !\n");

              // Keys and values won't be freed - use <a href="#robo57">HashIterInit</a> for that
              <a href="#robo55">HashDestroy</a>(h);
</pre>

<hr />
<a name="Hash2fHashCb">
</a><a name="robo52"></a><h2>Hash/HashCb, Hash/EqualCb [ Types ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_types.html#robo_top_of_doc">Types</a> ]</p>
<p class="item_name">SYNOPSIS</p>
<pre>      typedef ULONG (*<strong>HashCb</strong>)(APTR k);
      typedef int   (*<strong>EqualCb</strong>)(APTR k1, APTR k2);
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo54">HashCreate</a>, <a href="#robo63">HashStr</a>, <a href="#robo63">HashStrCmp</a>
</pre>

<hr />
<a name="Hash2fHashCount">
</a><a name="robo53"></a><h2>Hash/HashCount [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashCount</strong> - Returns number of item in the hash table
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      ULONG <strong>HashCount</strong>(HashTable h);
</pre>

<hr />
<a name="Hash2fHashCreate">
</a><a name="robo54"></a><h2>Hash/HashCreate [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashCreate</strong> - Create a hash table
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      HashTable <strong>HashCreate</strong>(ULONG minsize, <a href="#robo52">HashCb</a> hcb, <a href="#robo52">EqualCb</a>, ecb);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Create the initial structure for a hash table.
</pre>
<p class="item_name">INPUT</p>
<pre>      - minsize : minimum initial size of hashtable
      - hcb     : function for hashing keys. Prototype expected:
                      ULONG hcb(APTR key);
      - ecb     : function for determining key equality (return !0 if equals).
                      int ecb(APTR key1, APTR key2);
</pre>
<p class="item_name">RESULT</p>
<pre>      newly created hashtable or NULL on failure
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo56">HashInsert</a>, <a href="#robo62">HashSearch</a>, <a href="#robo57">HashIterInit</a>, <a href="#robo55">HashDestroy</a>
</pre>

<hr />
<a name="Hash2fHashDestroy">
</a><a name="robo55"></a><h2>Hash/HashDestroy [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashDestroy</strong> - Destroy all memory allocated for hash table.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      void <strong>HashDestroy</strong>(HashTable h, int free_values);
</pre>
<p class="item_name">INPUT</p>
<pre>      - h : the hashtable
      - free_values : whether to call 'free' on the remaining values
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo54">HashCreate</a>
</pre>

<hr />
<a name="Hash2fHashInsert">
</a><a name="robo56"></a><h2>Hash/HashInsert [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashInsert</strong> - Insert an item into the table
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      int <strong>HashInsert</strong>(HashTable h, APTR k, APTR v);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      This function will cause the table to expand if the insertion would take
      the ratio of entries to table size over the maximum load factor.

      If key already exists, it will just replace current value.
</pre>
<p class="item_name">INPUT</p>
<pre>      - h : the hashtable to insert into
      - k : the key - hashtable claims ownership and will free on removal
      - v : the value - does not claim ownership
</pre>
<p class="item_name">RESULT</p>
<pre>      non-zero for successful insertion
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo62">HashSearch</a>, <a href="#robo60">HashRemove</a>
</pre>

<hr />
<a name="Hash2fHashIterInit">
</a><a name="robo57"></a><h2>Hash/HashIterInit [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashIterInit</strong> - Initialize a object to scan values of table.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      void <strong>HashIterInit</strong>(HashTable h, HashTableItr);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      This function enable you to scan every entries of the hash table. The only
      operation allowed while doing this is removing an item. This has to be done
      using the special function <a href="#robo59">HashIterRem</a>(), NOT using <a href="#robo60">HashRemove</a>().
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo58">HashIterNext</a>, <a href="#robo61">HashScan</a>, <a href="#robo59">HashIterRem</a>
</pre>

<hr />
<a name="Hash2fHashIterNext">
</a><a name="robo58"></a><h2>Hash/HashIterNext [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashIterNext</strong> - advance the iterator to the next element.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      int <strong>HashIterNext</strong>(HashTableItr itr);
</pre>
<p class="item_name">RESULT</p>
<pre>      Returns zero if reached end of table
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo59">HashIterRem</a>, <a href="#robo57">HashIterInit</a>
</pre>

<hr />
<a name="Hash2fHashIterRem">
</a><a name="robo59"></a><h2>Hash/HashIterRem [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashIterRem</strong> - remove current element and advance the iterator to the next element.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      int <strong>HashIterRem</strong>(HashTableItr);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Remove the current item pointed by iterator and move to next item. If you
  need the value to free it, read it before removing (beware memory leaks!).
</pre>
<p class="item_name">RESULT</p>
<pre>      0 if reached the end of table.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo58">HashIterNext</a>
</pre>

<hr />
<a name="Hash2fHashRemove">
</a><a name="robo60"></a><h2>Hash/HashRemove [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashRemove</strong> - Remove an item in the hash table
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      APTR <strong>HashRemove</strong>(HashTable h, APTR k);
</pre>
<p class="item_name">INPUT</p>
<pre>      - h : the hashtable to remove the item from
      - k : the key to search for  - does not claim ownership
</pre>
<p class="item_name">RESULT</p>
<pre>      the value associated with the key, or NULL if none found
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo56">HashInsert</a>
</pre>

<hr />
<a name="Hash2fHashScan">
</a><a name="robo61"></a><h2>Hash/HashScan [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashScan</strong> - walk through items of table using callback.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      int <strong>HashScan</strong>(HashTable h, ScanCb cb, APTR data);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Scan each item of the table using a callback instead of using a loop. You
      can remove the current item by returning a special code in the callback.
</pre>
<p class="item_name">INPUT</p>
<pre>      - h    : table to scan.
      - cb   : function called on each item of the table. Prototype must be :

                   int cb(APTR key, APTR value, APTR data);

               where (key, value) is the current key/value pair found and data is
               the data parameter passed to <strong>HashScan</strong>.

               Possible return values for callback are :
               - 0 : continue scan.
               - 1 : remove current item from table and continue.
               - 2 : stop scan now.
               - 3 : remove and stop now.

      - data : custom value that will be transmitted to your callback.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo57">HashIterInit</a>
</pre>

<hr />
<a name="Hash2fHashSearch">
</a><a name="robo62"></a><h2>Hash/HashSearch [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashSearch</strong> - Search for a value associated to a key
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      APTR <strong>HashSearch</strong>(HashTable h, APTR k);
</pre>
<p class="item_name">INPUT</p>
<pre> - h : the hashtable to search
 - k : the key to search for  - does not claim ownership
</pre>
<p class="item_name">RESULT</p>
<pre>      The value associated with the key, or NULL if none found.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo56">HashInsert</a>
</pre>

<hr />
<a name="Hash2fHashStr">
</a><a name="robo63"></a><h2>Hash/HashStr, Hash/HashStrCmp,<br />Hash/HashStrCaseCmp [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">Hash</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>HashStr</strong> - Compute hash from a NULL-terminated string
      <strong>HashStrCmp</strong> - Compare case-sensitively string hash keys.
      <strong>HashStrCaseCmp</strong> - Compare case-insensitively string hash keys.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      ULONG <strong>HashStr</strong>(APTR k);
      int <strong>HashStrCmp</strong>(APTR k1, APTR k2);
      int <strong>HashStrCaseCmp</strong>(APTR k1, APTR k2);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Those functions can be supplied to <a href="#robo54">HashCreate</a> as callback, if your keys are
      strings (which will certainly be often the case).
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo54">HashCreate</a>
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./HashTable.c with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.34 on Thu Mar 06 2008 10:21:26
</p>
</div> <!-- footer -->
</body>
</html>
