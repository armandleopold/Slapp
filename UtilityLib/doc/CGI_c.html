<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<title>./CGI.c</title>
<!-- Source: ./CGI.c -->
<!-- Generated with ROBODoc Version 4.99.34 (Jan  4 2008) -->
</head>
<body>
<div id="logo">
<a name="robo_top_of_doc">Utility Library</a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./masterindex.html#top">Index</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_types.html#top">Types</a>
<a class="menuitem" href="./robo_variables.html#top">Variables</a>
</div> <!-- navigation -->
<div id="content">
<hr />
<a name="SWL2fCGI">
</a><a name="robo2"></a><h2>SWL/CGI [ Modules ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_modules.html#robo_top_of_doc">Modules</a> ]</p>
<p class="item_name">INTRODUCTION</p>
<pre>      This module contains a few functions to deal with <strong>CGI</strong> requests. Functions are
      very basic, don't expect too much, it just avoid the hassle to rewrite them
      for the hundreedth time.

      <strong>CGI</strong> functions make use of the following datatype:

              struct Request_t
              {
                      STRPTR req_Arg[MAXKEYS];
                      int    req_NbArg;
              };

      Field names aren't important, types are. MAXKEYS is a macro defined in
      the main header (default : 64).

      <a href="#robo21">ParseCGI</a>() is used to parse a url-encoded string and setup the key/value
      pairs in the req_Arg and req_NbArg fields, so that you can furthermore query
      for specific values using <a href="#robo20">GetValue</a>, <a href="#robo20">GetNumValue</a>, ...

      This datatypes can be changed, to add more fields. Since heritage is only a
      C++ feature, here the hack to work around this limitation:

      - Define a macro CUSTOM_REQ before including the main header.
      - Declare your own struct Request_t somewhere else with those very same
        initial fields (name does not matter). Follow them by whatever you want.

      Not perfect, but it works at least.
</pre>

<hr />
<a name="CGI2fGetProperty">
</a><a name="robo19"></a><h2>CGI/GetProperty, CGI/GetNumProperty [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo2">CGI</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>GetProperty</strong>    - Get value from a NULL-terminated key/value pair table.
      <strong>GetNumProperty</strong> - Like <strong>GetProperty</strong>, but convert the value into ULONG.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      STRPTR <strong>GetProperty</strong>(STRPTR * list, STRPTR key);
      int <strong>GetNumProperty</strong>(STRPTR * list, STRPTR key);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      Get a value associated to a key in a table of strings. Even indexes are
      considered to be keys, odd are supposed to be values. Table must be
      NULL-terminated.
</pre>
<p class="item_name">RESULT</p>
<pre>      <strong>GetProperty</strong> returns value quoted from table or NULL if not found.
      <strong>GetNumProperty</strong> will attempt to convert to integer. If it fails or if key is
      not defined, 0 will be returned.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo21">ParseCGI</a>, <a href="#robo20">GetValue</a>
</pre>

<hr />
<a name="CGI2fGetValue">
</a><a name="robo20"></a><h2>CGI/GetValue, CGI/GetNumValue,<br />CGI/GetBoolValue, CGI/ExtractValue,<br />CGI/SetValue [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo2">CGI</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>GetValue</strong>     - Get value associated to given key.
      <strong>GetNumValue</strong>  - Get numeric value associated to key (always decimal).
      <strong>GetBoolValue</strong> - Get numeric value associated to key, assuming value is a bool.
      <strong>ExtractValue</strong> - Like <strong>GetValue</strong>, but also removes key/value pair from list.
      <strong>SetValue</strong>     - Add or change a value associated to key.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      STRPTR <strong>GetValue</strong>(Request * req, STRPTR key);
      ULONG  <strong>GetNumValue</strong>(Request * req, STRPTR key);
      Bool   <strong>GetBoolValue</strong>(Request * req, STRPTR key);
      STRPTR <strong>ExtractValue</strong>(Request * req, STRPTR key);
      STRPTR <strong>SetValue</strong>(Request * req, STRPTR key, STRPTR value);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      These functions retrieve value associated to given key. <strong>ExtractValue</strong> will
      also remove the key/value pair from object.

      <strong>GetNumValue</strong> will convert the string into an unsigned integer. Value will
      always supposed to be a decimal number (ie: even if there is leading 0s or
      0x prefix, function will try to convert whatever it can). If function
      somehow fails.

      <strong>SetValue</strong> will change the value associated to given key. If it does not
      exists, the key/value pair will be added. Both key and value must point
      to valid memory block while object is in use.
</pre>
<p class="item_name">RESULT</p>
<pre>      - <strong>GetValue</strong>     : value associated to key, unconverted. NULL if not found.
      - <strong>GetNumValue</strong>  : value converter into ULONG, or 0 if not found.
      - <strong>GetBoolValue</strong> : 'True' if value is "1" or "on". 'False' otherwise. This kind
                   of value is usually returned by checkbox inside HTML forms.
      - <strong>ExtractValue</strong> : Like <strong>GetValue</strong>.
      - <strong>SetValue</strong>     : pointer to value or NULL if key cannot be inserted.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo21">ParseCGI</a>, <a href="#robo19">GetProperty</a>
</pre>

<hr />
<a name="CGI2fParseCGI">
</a><a name="robo21"></a><h2>CGI/ParseCGI [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo2">CGI</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>ParseCGI</strong> - Parse a url-encoded string and split it into key/value pairs.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      void <strong>ParseCGI</strong>(Request * req, STRPTR cgi);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      This function will parse a string encoded as URL, i.e.: key1=value1&amp;key2=value2&amp;...
      keys and values can contains '+' and '%XX' sequences, which will be converted
      in ' ' and ASCII value represented by hex sequence respectively.

      No memory are allocated in the process, "cgi" string will be modified and be
      referenced through "req", thus be sure "cgi" lifespan last as long as "req".
</pre>
<p class="item_name">INPUT</p>
<pre>      req - object that will hold the key/value pairs.
      cgi - string to parse. Will be modified, avoid constant strings.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo22">Unescape</a>, <a href="#robo20">GetValue</a>
</pre>

<hr />
<a name="CGI2fUnescape">
</a><a name="robo22"></a><h2>CGI/Unescape [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo2">CGI</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>      <strong>Unescape</strong> - Convert %\x\x sequence into characters.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>      void <strong>Unescape</strong>(STRPTR io);
</pre>
<p class="item_name">FUNCTION</p>
<pre>      This function will convert %\x\x sequence into the corresponding
      8bit character. Unicode sequence %u\x\x\x\x are converted into UTF-8.
</pre>
<p class="item_name">INPUT</p>
<pre>      io - string to convert.
</pre>
<p class="item_name">SEE ALSO</p>
<pre>      <a href="#robo21">ParseCGI</a>
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./CGI.c with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.34 on Thu Mar 06 2008 10:21:26
</p>
</div> <!-- footer -->
</body>
</html>
